<div class="container-fluid">
    <selector-navbar></selector-navbar>
    <div class="row">
        <div class="col-12 col-sm-3">
            navigation
        </div>
        <div class="col-12 col-sm-9">
            <div class="container">
        <h2 align="left">Liste des grades</h2><br>


        <div class="modal fade" id="AddGrade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header text-center">
                        <h4 class="modal-title w-100 font-weight-bold">Ajouter un grade</h4>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="resetform()">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <form [formGroup]="formgrade" id="AddGradeForm" (submit)="submit()">
                     	<div class="modal-body mx-3">
                     		<div class="md-form">
                     			<label for="Catégorie">Catégorie:</label>
	                        	<select type="text" name="categorie" class="form-control" id="categorie" (change)="showNiveaux($event)" formControlName="categorie">
	                        		<option value="" selected disabled hidden>--Choisissez une catégorie--</option>
	                        		<option *ngFor="let categ of categories" [value]="categ._id">{{categ.nomcategorie}}</option>
	                        	</select>
	                        </div> <br>
	                        <div class="md-form">
	                        	<label for="Niveau">Niveau:</label>
	                        	<select type="text" name="niveau" class="form-control" id="niveau" formControlName="niveau">
	                        		<option *ngFor="let niv of niveaux" [value]="niv._id">{{niv.nomniveau}}</option>
	                        	</select>
	                        </div> <br>
	                        <div class="md-form">
	                        	<label for="Nom Grade">Nom Grade:</label>
	                        	<input type="text" name="nomgrade" class="form-control" id="nomgrade" formControlName="nomgrade">
	                        </div> <br>
	                        <div class="md-form">
	                        	<label for="Code Grade">Code Grade:</label>
	                        	<input type="text" name="codegrade" class="form-control" id="codegrade" formControlName="codegrade">
	                        </div> <br>
                      <div class="modal-footer d-flex justify-content-center">
                          <button class="btn btn-primary btn-md">Valider</button>
                          <button type="button" class="btn btn-default btn-md" data-dismiss="modal" aria-label="Close" (click)="resetform()">
                              <span aria-hidden="true">Fermer</span>
                          </button>
                      </div>
                      </div>
                  </form>
                </div>
            </div>
        </div>



        <!-- Affiche la liste des grades -->
        <div class="text-right">
            <button class="btn btn-primary btn-rounded mb-4" data-toggle="modal" data-target="#AddGrade">Ajouter</button>
        </div>
         <div *ngIf="!grades" class="alert alert-info" style="width: 70%; margin: auto;">
          <strong>Information!</strong> Vous n'avez pas de catégories créés dans la base de données. Cliquez <a href="" class="btn btn-default btn-rounded mb-4" data-toggle="modal" data-target="#modalRegisterForm">ici</a> pour en ajouter.
        </div>

        <div *ngIf="grades" class="container" style="position: relative; padding: 10px; margin: auto;">
        	<table class="table table-hover">
			  <thead>
			    <tr>
			      <th scope="col">#</th>
			      <th scope="col">Catégorie</th>
			      <th scope="col">Niveau</th>
			      <th scope="col">Nom Grade</th>
			      <th scope="col">Code Grade</th>
            <th></th>
			    </tr>
			  </thead>
			  <tbody>
			    <tr *ngFor="let grad of grades; let i = index">
			      <th scope="row">{{i+1}}</th>
			      <th>{{grad.categorie.nomcategorie}}</th>
			      <td>{{grad.niveau.nomniveau}}</td>
			      <td>{{grad.nomgrade}}</td>
			      <td>{{grad.codegrade}}</td>
			      <td><button type="button" class="btn btn-danger btn-sm" id="{{grad._id}}" (click)="delete($event)"><span aria-hidden="true">&times;</span></button></td>
			    </tr>
			  </tbody>
			</table>
        </div>
      </div>
        </div>
    </div>
</div>